# ğŸš€ Cloudflare DNS ç®¡ç†å·¥å…· - å¿«é€Ÿå¼€å§‹

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿéƒ¨ç½²

### ğŸªŸ Windows ç”¨æˆ·ï¼ˆæœ€ç®€å•ï¼‰

1. **ç¡®ä¿å·²å®‰è£… Node.js**
   - å¦‚æœªå®‰è£…ï¼Œè®¿é—® [nodejs.org](https://nodejs.org/) ä¸‹è½½

2. **ä¸€é”®å¯åŠ¨**
   ```
   åŒå‡»è¿è¡Œï¼šstart-proxy-server.bat
   ```

3. **è®¿é—®åº”ç”¨**
   - æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:3001

### ğŸ§ Linux ç”¨æˆ·ï¼ˆæ¨èï¼‰

1. **ä¸€é”®æ™ºèƒ½å®‰è£…ï¼ˆæ¨èï¼‰**
   ```bash
   chmod +x simple-one-click.sh
   ./simple-one-click.sh
   ```
   *è‡ªåŠ¨å¤„ç†æ‰€æœ‰æƒé™é—®é¢˜ï¼Œè¯­æ³•ç®€åŒ–ï¼Œæ›´ç¨³å®š*

2. **æ ‡å‡†å®‰è£…**
   ```bash
   chmod +x install-simple.sh
   ./install-simple.sh
   ```

3. **å¦‚æœä»æœ‰é—®é¢˜ï¼Œä½¿ç”¨è‡ªåŠ¨ä¿®å¤å®‰è£…**
   ```bash
   chmod +x auto-fix-install.sh
   ./auto-fix-install.sh
   ```

4. **è®¿é—®åº”ç”¨**
   - æœ¬åœ°ï¼šhttp://localhost:3001
   - è¿œç¨‹ï¼šhttp://æœåŠ¡å™¨IP:3001

### ğŸ³ Docker ç”¨æˆ·ï¼ˆæœ€ç¨³å®šï¼‰

1. **ä¸€é”®éƒ¨ç½²**
   ```bash
   chmod +x docker-deploy.sh
   ./docker-deploy.sh
   ```

2. **æˆ–æ‰‹åŠ¨éƒ¨ç½²**
   ```bash
   docker-compose up -d --build
   ```

3. **è®¿é—®åº”ç”¨**
   - http://localhost:3001

4. **Docker ç®¡ç†å‘½ä»¤**
   ```bash
   # æŸ¥çœ‹çŠ¶æ€
   docker ps
   
   # æŸ¥çœ‹æ—¥å¿—
   docker logs cf-dns-manager -f
   
   # åœæ­¢æœåŠ¡
   docker-compose down
   
   # é‡æ–°æ„å»º
   docker-compose up -d --build --force-recreate
   ```

## ğŸ”‘ é…ç½® Cloudflare API

### 1. è·å– API Token

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
2. ç‚¹å‡» "Create Token"
3. é€‰æ‹© "Custom token"
4. è®¾ç½®æƒé™ï¼š
   - **Zone** - Zone:Read
   - **Zone** - DNS:Edit
5. é€‰æ‹©åŸŸåèŒƒå›´ï¼ˆæ¨èé€‰æ‹©ç‰¹å®šåŸŸåï¼‰
6. å¤åˆ¶ç”Ÿæˆçš„ Token

### 2. é…ç½®å·¥å…·

1. è¾“å…¥ API Token
2. è¾“å…¥ Cloudflare è´¦æˆ·é‚®ç®±
3. é€‰æ‹©"ä»£ç†æ¨¡å¼"ï¼ˆé¿å… CORS é—®é¢˜ï¼‰
4. ç‚¹å‡»"ğŸ”— æµ‹è¯•è¿æ¥"
5. ç‚¹å‡»"è¿æ¥å¹¶åŠ è½½åŸŸå"

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨

### DNS è®°å½•ç®¡ç†
- **æ·»åŠ è®°å½•**ï¼šç‚¹å‡» â• æ·»åŠ è®°å½•
- **æ‰¹é‡æ·»åŠ **ï¼šç‚¹å‡» ğŸ“¦ æ‰¹é‡æ·»åŠ ï¼Œä½¿ç”¨ CSV æ ¼å¼
- **ç¼–è¾‘è®°å½•**ï¼šç‚¹å‡»è®°å½•è¡Œçš„ âœï¸ æŒ‰é’®
- **å¤åˆ¶è®°å½•**ï¼šç‚¹å‡» ğŸ“‹ æŒ‰é’®ï¼Œå¿«é€Ÿå¤åˆ¶ç°æœ‰è®°å½•
- **åˆ é™¤è®°å½•**ï¼šç‚¹å‡» ğŸ—‘ï¸ æŒ‰é’®

### æ‰¹é‡æ“ä½œ
1. **é€‰æ‹©è®°å½•**ï¼š
   - å•é€‰ï¼šç›´æ¥ç‚¹å‡»å¤é€‰æ¡†
   - æ‰¹é‡é€‰ï¼šé€‰ä¸­ç¬¬1ä¸ªï¼ŒæŒ‰ä½ Shift é€‰ä¸­ç¬¬Nä¸ª
   - å…¨é€‰ï¼šç‚¹å‡»è¡¨å¤´çš„å…¨é€‰æ¡†

2. **æ‰¹é‡æ“ä½œ**ï¼š
   - ç‚¹å‡» âš¡ æ‰¹é‡æ“ä½œ
   - é€‰æ‹©ï¼šå¼€å¯/å…³é—­ CDNã€åˆ é™¤è®°å½•

### é…ç½®è¿ç§»
1. **å¯¼å‡ºé…ç½®**ï¼š
   - é€‰ä¸­è¦å¯¼å‡ºçš„è®°å½•ï¼ˆå¯é€‰ï¼‰
   - ç‚¹å‡» ğŸ“¤ å¯¼å‡ºé…ç½®
   - ä¸‹è½½ JSON é…ç½®æ–‡ä»¶

2. **å¯¼å…¥é…ç½®**ï¼š
   - ç‚¹å‡» ğŸ“¥ å¯¼å…¥é…ç½®
   - é€‰æ‹©é…ç½®æ–‡ä»¶
   - é€‰æ‹©ç›®æ ‡åŸŸåï¼ˆé»˜è®¤ä¸ºå½“å‰åŸŸåï¼‰
   - å¼€å§‹å¯¼å…¥

## ğŸ”§ æ•…éšœæ’é™¤

### CORS é”™è¯¯
å¦‚æœé‡åˆ°è·¨åŸŸé”™è¯¯ï¼Œå·¥å…·ä¼šè‡ªåŠ¨æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆï¼š
1. ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼ˆæ¨èï¼‰
2. å®‰è£…æµè§ˆå™¨ CORS æ‰©å±•
3. å¯åŠ¨ Chrome ç¦ç”¨ CORS æ£€æŸ¥

### æƒé™é”™è¯¯
å¦‚æœé‡åˆ° npm æƒé™é”™è¯¯ï¼Œæœ‰å¤šç§è‡ªåŠ¨ä¿®å¤æ–¹æ¡ˆï¼š

```bash
# æ–¹æ¡ˆ1: è‡ªåŠ¨ä¿®å¤å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x auto-fix-install.sh
./auto-fix-install.sh

# æ–¹æ¡ˆ2: æƒé™ä¿®å¤è„šæœ¬
chmod +x fix-permissions.sh
./fix-permissions.sh

# æ–¹æ¡ˆ3: æ‰‹åŠ¨ä¿®å¤
sudo chown -R $USER:$USER ~/.npm
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH
```

### å¯åŠ¨å¤±è´¥
å¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥ï¼š

```bash
# æ–¹æ¡ˆ1: è¿è¡Œè¯Šæ–­è„šæœ¬
chmod +x diagnose.sh
./diagnose.sh

# æ–¹æ¡ˆ2: ä½¿ç”¨æµ‹è¯•æœåŠ¡å™¨
cd /opt/cf-dns-manager
node test-server.js

# æ–¹æ¡ˆ3: æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u cf-dns-manager -f

# æ–¹æ¡ˆ4: æ‰‹åŠ¨å¯åŠ¨æ’æŸ¥
cd /opt/cf-dns-manager
node cf-dns-proxy-server.js
```

### è¿æ¥é—®é¢˜
1. æ£€æŸ¥ API Token æƒé™
2. éªŒè¯é‚®ç®±åœ°å€
3. æµ‹è¯•ç½‘ç»œè¿æ¥
4. å°è¯•ä»£ç†æ¨¡å¼

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—æŸ¥çœ‹
- **Windows**ï¼šæŸ¥çœ‹å‘½ä»¤è¡Œè¾“å‡º
- **Linux**ï¼š`sudo journalctl -u cf-dns-manager -f`
- **Docker**ï¼š`docker-compose logs -f`

### å¸¸ç”¨å‘½ä»¤
```bash
# é‡å¯æœåŠ¡
sudo systemctl restart cf-dns-manager

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status cf-dns-manager

# åœæ­¢æœåŠ¡
sudo systemctl stop cf-dns-manager
```

---

**æç¤º**ï¼šé¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆé˜…è¯» README.md äº†è§£å®Œæ•´åŠŸèƒ½ï¼
